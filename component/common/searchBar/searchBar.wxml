<!--
/**
 * 全局搜索框
 * search.wxml
 * -----------------------------------
 * 18/03/14 Jerry 新增
 */
-->
<import src="../filterPanel/filterPanel.wxml"/>

<template name="searchBar" xmlns:wx="http://www.w3.org/1999/xhtml">

  <!-- 输入框模式 -->
  <block wx:if="{{inputable}}">

  <view class="search-bar inputable">

    <image class="prefix-ico" src="../../../image/icos/search_32.png" />

    <input class="ipt" type="text" value="{{keyword}}" placeholder="输入关键词搜索商品" confirm-type="搜索" bindinput="searchInput" bindfocus="searchFocus" bindconfirm="searchConfirm"/>

    <image class="endfix-ico {{hiddenClear}}" src="../../../image/icos/remove_gray_dark_48.png" bindtap="searchClear" />

    <block wx:if="{{ 'hidden' != hiddenClear }}">
      <text class="op" bindtap="searchConfirm">搜索</text>
    </block>
    <block wx:else>
      <text class="op" bindtap="searchCancel">取消</text>
    </block>

  </view>

    <!--  筛选模板 -->
    <template is="filterPanel" data="{{status:status,tabText:tabText,hideMenu:hideMenu,tab:tab,brand:brand}}"/>

  <!-- 搜索历史 -->
  <view class="search-history {{hiddenHistory}}">
    <!-- 没有搜索历史的，只要hiddenHistory不等于hidden，仍要显示出来进行屏幕展位 -->
    <block wx:if="{{ histories != null && histories.length > 0 }}">
    <view class="title">
      <text>历史记录</text>
      <image src="../../../image/icos/trash_gray_dark_48.png" bindtap="searchHistoryClear" />
    </view>
    <view class="body">
      <text wx:for="{{histories}}" wx:key="item" bindtap="searchHistoryClick" data-keyword="{{item}}">{{item}}</text>
    </view>
    </block>

  </view>

  </block>

  <block wx:else>
  <view class="search-bar" bindtap="handleSearchClick">
    <image class="prefix-ico" src="../../../image/icos/search_32.png" />
    <text class="ipt">输入关键词搜索商品</text>
  </view>
  </block>

</template>